
ESTRATEGIA DE SCALPING INTRADÍA
ORB  ·  Fair Value Gap  ·  Engulfing  ·  RR 3:1
Documento Técnico de Referencia
Versión 2.0 Refinada  |  2026

Timeframes: M5 (señal) + M1 (confirmación)  |  Sesión: 9:30–11:00 AM NY
Riesgo por operación: 0.25%–1%  |  Drawdown diario máximo: 3%  |  Max trades/día: 1
 
1. Concepto Estratégico y Base Estructural

1.1 Qué explota esta estrategia
Esta estrategia de scalping intradía combina tres fenómenos de microestructura de mercado en una secuencia causal y determinista:

•	Volatilidad institucional de apertura (9:30–9:35 NY): la apertura NYSE activa flujos masivos de capital que forman extremos de precio iniciales (ORH/ORL). Estos niveles concentran órdenes stop de participantes minoristas y límite de instituciones.
•	Ruptura con desplazamiento real (FVG): una ruptura válida del rango de apertura no es solo un cierre fuera del nivel. Requiere desplazamiento impulsivo que crea una ineficiencia (Fair Value Gap), evidencia de flujo institucional y no de ruido de mercado.
•	Mitigación y continuación (Engulfing en M1): el precio regresa a llenar la ineficiencia, los participantes que se perdieron la ruptura intentan subirse al tren, y una vela engulfing confirma que el flujo dominante sigue activo. Ahí entramos.

Secuencia causal completa
Liquidez inicial → Extremos ORB → Ruptura impulsiva → Ineficiencia FVG →
Mitigación del FVG → Confirmación Engulfing → Entrada en continuación

1.2 Por qué la estrategia es estructuralmente sólida
No se trata de una estrategia de rompimiento simple. La mayoría de los rompimientos del rango inicial son falsos. Esta estrategia filtra eso exigiendo tres evidencias simultáneas: desplazamiento estructural (FVG), retesteo precio (mitigación) y confirmación de momentum (engulfing con volumen). El ratio 3:1 asegura rentabilidad con un winrate de solo el 30%.

2. Definiciones Matemáticas Precisas

2.1 Rango de Apertura (ORB — Opening Range Breakout)
Timeframe: M5 (vela única de las 9:30–9:35 AM hora NY)


ORH = High de la vela M5 de las 9:30–9:35
ORL = Low de la vela M5 de las 9:30–9:35
ORR (Rango) = ORH − ORL

Condición de rechazo: Si ORR < min_range_pips  →  No operar ese día

El rango mínimo recomendado es 10 pips en Forex / 0.10% del precio en índices para evitar operar en aperturas sin volatilidad real.

2.2 Ruptura Válida del ORB (en M1)
Una ruptura se considera válida únicamente si:
•	Una vela M1 cierra por encima de ORH (ruptura alcista) o por debajo de ORL (ruptura bajista).
•	El cuerpo de la vela de ruptura es ≥ 50% del rango total de esa vela.
•	El volumen de la vela de ruptura es ≥ 1.3 × promedio de las últimas 20 velas M1.

⚠ Ruptura inválida — Ignorar si:
• La vela penetra el nivel intracandle pero cierra de regreso adentro del rango (falso rompimiento).
• El cierre es dentro de 1 pip/tick del nivel (zona de ruido).
• Ocurre en los primeros 30 segundos de la vela (wicks de apertura ruidosos).

2.3 Fair Value Gap (FVG) — Ineficiencia de Precio
El FVG se detecta en M1, inmediatamente después de la ruptura válida. Para tres velas consecutivas i-2, i-1, i:


FVG BAJISTA (para setup short):
  Condición:     High(i) < Low(i-2)
  Zona FVG:      [Low(i-2) ... High(i)]
  FVG_top    =  Low(i-2)
  FVG_bottom =  High(i)

FVG ALCISTA (para setup long):
  Condición:     Low(i) > High(i-2)
  Zona FVG:      [Low(i) ... High(i-2)]
  FVG_top    =  High(i-2)
  FVG_bottom =  Low(i)

Tamaño mínimo FVG:  FVG_top − FVG_bottom ≥ 0.5 × ATR_M1

Si no existe FVG detectable tras la ruptura, el setup se descarta completamente para esa sesión.

2.4 ATR (Average True Range)

TR(i) = max[ High(i)−Low(i), |High(i)−Close(i-1)|, |Low(i)−Close(i-1)| ]

ATR_M5(n=14) = media exponencial de TR sobre últimas 14 velas M5
ATR_M1(n=14) = media exponencial de TR sobre últimas 14 velas M1

2.5 Vela FCR en M5 (Failure / Continuation / Reversal)
Una vela M5 se clasifica como FCR (señal de impulso fuerte) si cumple las tres condiciones simultáneamente:
•	Rango total: High − Low ≥ k1 × ATR_M5  (k1 = 1.5 por defecto)
•	Ratio de cuerpo: |Close − Open| / (High − Low) ≥ k2  (k2 = 0.60)
•	Volumen relativo: Volume ≥ k3 × avg_volume_M5_20  (k3 = 1.5)

2.6 Vela Engulfing Bajista en M1 (Confirmación)
Para velas M1 consecutivas (prev, curr), donde curr es bajista:

Condición de engulfing:
  Open(curr)  ≥  Close(prev)   [apertura ≥ cierre previo]
  Close(curr) ≤  Open(prev)    [cierre ≤ apertura previa]

Condición de cuerpo mínimo:
  |Close(curr) − Open(curr)| ≥ p_cuerpo_min × ATR_M1
  con p_cuerpo_min = 0.40

Condición de volumen:
  Volume(curr) ≥ p_vol_min × avg_vol_M1_20
  con p_vol_min = 1.20

 
3. Lógica Operativa Paso a Paso

Vista general del flujo de decisión
PASO 1: Registrar ORH y ORL de la vela M5 (9:30–9:35 AM NY)
PASO 2: En M1, esperar ruptura válida de ORH o ORL
PASO 3: Confirmar FVG en M1 tras la ruptura (desplazamiento institucional)
PASO 4: Esperar que precio regrese al FVG (mitigación / retest)
PASO 5: Buscar Engulfing bajista/alcista dentro del FVG
PASO 6: Ejecutar entrada con SL, TP y position sizing calculados

PASO 1 — Registro del Rango de Apertura (9:30–9:35 AM NY)
•	Timeframe: M5. Se usa exclusivamente la primera vela de sesión.
•	Registrar ORH, ORL y ORR.
•	Si ORR < min_range: marcar día como "No Operar" y no continuar.
•	Si hay evento de noticias en ±15 minutos del inicio: marcar día como "No Operar".

PASO 2 — Detección de Ruptura en M1
•	Cambiar a M1 a partir de las 9:35 AM.
•	Monitorear en tiempo real cada cierre de vela M1.
•	Ruptura bajista confirmada: Close(curr) < ORL y body_ratio ≥ 0.50 y volumen ≥ 1.3×avg.
•	Ruptura alcista confirmada: Close(curr) > ORH con mismas condiciones.
•	Si ocurren ambas rupturas en misma sesión: operar solo la primera cronológicamente.

PASO 3 — Identificación del FVG
•	Evaluar las tres últimas velas M1 tras la ruptura.
•	Calcular FVG según definición matemática (sección 2.3).
•	Validar que el tamaño del FVG ≥ 0.5 × ATR_M1 (gap significativo, no ruido).
•	Registrar FVG_top, FVG_bottom y FVG_midpoint = (FVG_top + FVG_bottom) / 2.
•	Si no existe FVG: descartar el setup. No hay alternativa ni reemplazo.

PASO 4 — Espera de Mitigación / Retest del FVG
•	El precio debe regresar hacia el FVG tras el impulso.
•	Condición mínima de mitigación: precio toca o entra al FVG (cualquier wick o cuerpo).
•	Condición preferida: precio entra al menos hasta el 50% del FVG (FVG_midpoint).
•	Tiempo máximo de espera: 30 velas M1 desde que se forma el FVG.
•	Si el precio no regresa al FVG en ese tiempo: setup expirado, no ejecutar.

⚠ Invalidación del setup durante el retest:
• El precio cierra por debajo de FVG_bottom (en setup bajista): señal de debilidad — cancelar.
• El precio forma un nuevo swing high por encima del ORH antes de hacer retest: cancelar.
• Spread supera max_spread durante el retest: posponer hasta normalizarse.

PASO 5 — Confirmación: Engulfing en M1 dentro del FVG
•	Condición de zona: el cuerpo de la vela engulfing debe iniciar o estar dentro del rango FVG.
•	Cuerpo: |Close − Open| ≥ 0.40 × ATR_M1.
•	Volumen: ≥ 1.20 × avg_vol_M1_20.
•	Variante premium: si se detecta pinbar de rechazo + engulfing en la misma zona, la señal tiene mayor confianza (no obligatorio, pero priorizar).

PASO 6 — Ejecución, Stop y Take Profit
Tipo de orden
•	Primera opción: orden limit al borde del FVG (FVG_top en setup bajista) para mejor precio.
•	Fallback: si la orden limit no se ejecuta en los primeros 30 segundos de la siguiente vela, cancelar y ejecutar market al cierre de la vela de confirmación.

Stop Loss

Para setup BAJISTA (short):
  SL = max(FVG_top, last_swing_high_M1) + buffer
  buffer = 0.10 × ATR_M1

Para setup ALCISTA (long):
  SL = min(FVG_bottom, last_swing_low_M1) − buffer
  buffer = 0.10 × ATR_M1

Nota: last_swing_high/low = el extremo más reciente de las últimas 5 velas M1.

Take Profit

RR fijo 3:1:
  risk_pips = |entry − stop|

  TP_único   = entry − 3 × risk_pips  (short)
               entry + 3 × risk_pips  (long)

Gestión escalonada avanzada (opcional):
  TP1 = entry − 2 × risk_pips  →  cerrar 50% posición
  TP2 = entry − 3 × risk_pips  →  cerrar 50% restante
  Mover SL a breakeven cuando se alcanza TP1

4. Gestión de Capital y Position Sizing

4.1 Cálculo del Tamaño de Posición

risk_amount   = account_size × risk_per_trade
risk_pips     = |entry_price − stop_price|
position_size = risk_amount / (risk_pips × pip_value)

Validaciones obligatorias:
  position_size ≤ max_position_size
  position_size × margen_requerido ≤ margen_disponible

4.2 Ejemplo Práctico — Setup Bajista
Variable	Valor
Cuenta	$10,000
risk_per_trade	0.5%  →  risk_amount = $50
Entry	1.1988
Stop Loss	1.2007  (FVG_top + buffer)
risk_pips	|1.1988 − 1.2007| = 19 pips
TP (3:1)	1.1988 − (3 × 0.0019) = 1.1931
Position Size	$50 / (19 pips × pip_value del instrumento)

4.3 Reglas de Gestión de Riesgo
•	Riesgo por trade: 0.25%–1.0% del capital. Empezar en 0.5% hasta tener 50 trades en backtest.
•	Máximo 1 trade activo simultáneamente (max_concurrent_trades = 1).
•	Máximo 2 trades por día (incluye stops y ganancias).
•	Stop diario: si se alcanzan 2 pérdidas consecutivas o drawdown intraday ≥ 2%, cerrar operaciones y pausar el día.
•	Circuit-breaker global: si drawdown acumulado del mes supera 10%, reducir size a la mitad y revisar parámetros.

 
5. Parámetros Configurables del Sistema

Parámetro	Valor Sugerido	Rango Ajustable	Descripción
k1_ATR_FCR	1.5	1.2 – 2.0	Umbral mínimo de rango de vela FCR en M5
k2_body_ratio	0.60	0.50 – 0.75	Proporción cuerpo/rango para FCR y engulfing
k3_vol_ratio_FCR	1.50	1.2 – 2.0	Volumen relativo mínimo en vela FCR M5
p_cuerpo_min	0.40	0.30 – 0.60	Cuerpo mínimo de engulfing relativo a ATR_M1
p_vol_min	1.20	1.0 – 1.8	Volumen relativo mínimo en vela engulfing M1
risk_per_trade	0.005	0.0025 – 0.01	Fracción del capital a arriesgar por trade
RR_target	3	2.5 – 4.0	Ratio riesgo/recompensa objetivo
buffer_SL_factor	0.10	0.05 – 0.20	Multiplicador de ATR_M1 para buffer del SL
wait_retest_max_M1	30	20 – 50	Velas M1 máximas de espera para el retest
max_spread	0.0005	Instrumento-specific	Spread máximo permitido para ejecutar
min_FVG_size_ATR	0.50	0.3 – 0.8	Tamaño mínimo del FVG como fracción del ATR_M1
min_range_pips	10	5 – 20	Rango mínimo ORB para operar ese día
vol_ruptura_ratio	1.30	1.1 – 1.6	Volumen relativo mínimo en vela de ruptura M1

Optimización de parámetros
Para backtest: usar grid search sobre k1, k2, p_cuerpo_min y risk_per_trade.
Métrica de optimización principal: Expectancy = (winrate × avg_win) − (loss_rate × avg_loss)
Evitar sobreoptimizar: validar en datos out-of-sample mínimo 3 meses distintos al período de entrenamiento.

6. Filtros Anti-Señales Falsas

6.1 Filtros Obligatorios (bloquean la señal)
•	Spread > max_spread al momento de la entrada.
•	No existe FVG detectable tras la ruptura.
•	La ruptura ocurre con cuerpo de vela < 50% del rango (probable falso rompimiento).
•	Evento de noticias de impacto alto (NFP, FOMC, CPI) dentro de ±15 minutos.
•	El mercado no tiene estructura unidireccional: múltiples Higher Highs y Lower Lows entrelazados sin dirección clara.
•	Apertura gap mayor al 0.5% del precio previo cierre: esperar estabilización.

6.2 Filtros de Calidad (reducen confianza pero no bloquean)
•	Volumen del FVG inferior a 1.0 × avg (bajo interés institucional).
•	Retest del FVG es muy rápido (< 3 velas M1): señal de posible trampa.
•	El FVG está a menos de 5 pips del ORH/ORL: zona de superposición de niveles, mayor ruido.
•	La sesión muestra rango lateral previo > 20 velas M1 sin dirección.

6.3 Sesiones y Horarios
•	Horario óptimo de operación: 9:30–11:00 AM hora NY (apertura NYSE).
•	Horario secundario aceptable: 14:00–15:30 hora NY (apertura Londres → NYSE overlap).
•	Evitar: pre-market, primera hora de sesión asiática, última hora antes del cierre.

 
7. Pseudocódigo del Agente (Implementación)

7.1 Bucle Principal

# ─── INICIALIZACIÓN ─────────────────────────────────────────────
state = { orh: None, orl: None, fvg: None, setup_active: False }
params = load_config('config.json')

# ─── BUCLE PRINCIPAL ─────────────────────────────────────────────
for each market_session:

    # PASO 1: Registrar ORB
    wait_until(09:35:00)
    orb_candle = get_M5_candle(09:30)
    state.orh = orb_candle.high
    state.orl = orb_candle.low

    if (state.orh - state.orl) < params.min_range_pips:
        log('ORB too small. Skipping session.')
        continue

    if news_event_nearby(window_minutes=15):
        log('News event detected. Skipping session.')
        continue

    # PASO 2-5: Monitorear M1
    retest_countdown = params.wait_retest_max_M1

    for each new_M1_candle in session:

        update_ATR_M1()
        update_volume_avg_M1()

        if not state.fvg:
            breakout = detect_breakout(new_M1_candle, state.orh, state.orl)
            if breakout.valid:
                fvg = compute_FVG(last_3_M1_candles, direction=breakout.dir)
                if fvg and fvg.size >= params.min_FVG_size_ATR * ATR_M1:
                    state.fvg = fvg
                    log(f'FVG detected: {fvg}')

        elif state.fvg and not state.setup_active:
            retest_countdown -= 1
            if retest_countdown <= 0:
                state.fvg = None  # setup expirado
                continue

            if price_in_FVG(new_M1_candle, state.fvg):
                if is_engulfing(new_M1_candle, prev_candle, state.fvg.direction):
                    if volume_ok(new_M1_candle):
                        execute_trade(new_M1_candle, state.fvg, params)
                        state.setup_active = True

        elif state.setup_active:
            monitor_trade()  # check SL, TP, circuit_breakers

7.2 Función: compute_FVG

def compute_FVG(candles, direction):
    i_minus_2, i_minus_1, i = candles[-3], candles[-2], candles[-1]

    if direction == 'bearish':
        # FVG bajista: gap entre high(i-2) y low(i)
        if i_minus_2.high < i.low:
            return FVG(
                top    = i_minus_2.high,
                bottom = i.low,
                direction = 'bearish'
            )

    elif direction == 'bullish':
        # FVG alcista: gap entre low(i-2) y high(i)
        if i_minus_2.low > i.high:
            return FVG(
                top    = i_minus_2.low,
                bottom = i.high,
                direction = 'bullish'
            )

    return None  # No FVG detectable

7.3 Función: execute_trade

def execute_trade(confirm_candle, fvg, params):

    # Calcular precios
    entry = choose_entry(confirm_candle, fvg)
    swing = last_swing_extreme(fvg.direction, lookback=5)
    buffer = params.buffer_SL_factor * ATR_M1

    if fvg.direction == 'bearish':
        stop  = max(fvg.top, swing.high) + buffer
        tp    = entry - params.RR_target * abs(entry - stop)
        side  = 'SHORT'
    else:
        stop  = min(fvg.bottom, swing.low) - buffer
        tp    = entry + params.RR_target * abs(entry - stop)
        side  = 'LONG'

    # Position sizing
    risk_pips = abs(entry - stop)
    size = calc_position_size(account.size, params.risk_per_trade,
                              risk_pips, pip_value)

    # Validaciones
    assert size <= params.max_position_size
    assert spread <= params.max_spread

    # Orden OCO
    order = place_OCO(side, entry, stop, tp, size)

    # Audit log
    log_signal({
        'signal_id': generate_id(),
        'entry': entry, 'stop': stop, 'tp': tp,
        'fvg_top': fvg.top, 'fvg_bottom': fvg.bottom,
        'position_size': size, 'order_id': order.id
    })

    return order

8. Métricas de Backtest y KPIs

KPI	Fórmula / Descripción	Umbral Mínimo Aceptable
Win Rate	Trades ganadores / Total trades	≥ 35%
Expectancy	(WR × avg_win) − (LR × avg_loss)	> 0 (positiva)
Profit Factor	Suma ganancias / Suma pérdidas	≥ 1.5
Max Drawdown	Caída máxima pico-valle en capital	< 15%
Sharpe Ratio	(Avg return − Risk-free) / StdDev	≥ 1.0
Avg RR realizado	Promedio de RR obtenido por trade	≥ 1.8
Trades/mes	Frecuencia de señales válidas	10 – 40
CAGR	Tasa de crecimiento anual compuesta	≥ 20%
Slippage impact	Diferencia PnL con/sin slippage modelado	< 15% reducción

8.1 Análisis de Sensibilidad Requerido
•	Ejecutar backtest con 3 niveles de slippage: 0, 1× avg, 2× avg. Si el sistema deja de ser rentable con 1× avg: revisar lógica de entrada.
•	Probar en al menos 6 meses de datos históricos distintos al período de optimización.
•	Registrar win rate por franja horaria (9:30–10:00, 10:00–10:30, etc.) para identificar las mejores ventanas de operación.

9. Gestión de Errores y Seguridad del Sistema

9.1 Circuit Breakers
•	Drawdown intraday ≥ 2%: cerrar posición activa y detener el agente por el resto del día.
•	Drawdown mensual ≥ 10%: reducir risk_per_trade al 50% y activar revisión manual de parámetros.
•	2 pérdidas consecutivas en el día: pausar operaciones hasta el siguiente día.
•	Spread > max_spread × 2 durante más de 60 segundos: cerrar posición activa por seguridad.

9.2 Gestión de Errores de API / Broker
•	Retry con backoff exponencial: 1s, 2s, 4s. Máximo 3 intentos.
•	Si la orden no se confirma en 30 segundos: asumir no-ejecución y cancelar intención.
•	Orden parcialmente llenada: ajustar TP proporcionalmente al tamaño ejecutado. Cancelar el resto.
•	Gap de mercado que salta el SL: registrar slippage real en audit log y cerrar al mercado inmediatamente.

9.3 Formato de Audit Log (JSON)

{
  "signal_id":     "20260217T0935_ORB_SHORT_01",
  "timestamp":     "2026-02-17T09:35:42Z",
  "session":       "NY_OPEN",
  "direction":     "SHORT",
  "orh":           1.20050,
  "orl":           1.19800,
  "fvg_top":       1.20000,
  "fvg_bottom":    1.19600,
  "entry":         1.19880,
  "stop":          1.20070,
  "tp":            1.19310,
  "risk_pips":     0.00190,
  "position_size": 0.12,
  "slippage_real": 0.00002,
  "outcome":       "closed_TP",
  "pnl_usd":       148.50,
  "notes":         "Engulfing en M1 con volumen 1.8x avg. FVG tamaño 40 pips."
}

 
10. Configuración Machine-Readable (config.json)

{
  "strategy": {
    "name": "ORB_FVG_Engulfing_Scalper",
    "version": "2.0",
    "timeframes": { "signal": "M5", "confirm": "M1" },
    "session": {
      "start": "09:30",
      "end": "11:00",
      "timezone": "America/New_York"
    }
  },
  "params": {
    "k1_ATR_FCR":        1.5,
    "k2_body_ratio":     0.60,
    "k3_vol_ratio_FCR":  1.50,
    "vol_ruptura_ratio": 1.30,
    "p_cuerpo_min":      0.40,
    "p_vol_min":         1.20,
    "min_FVG_size_ATR":  0.50,
    "min_range_pips":    10,
    "wait_retest_max_M1":30,
    "max_spread":        0.0005
  },
  "execution": {
    "entry_type":        "limit_with_market_fallback",
    "limit_timeout_sec": 30,
    "RR_target":         3,
    "buffer_SL_factor":  0.10,
    "tp_scaling": {
      "enabled":         false,
      "tp1_RR":          2.0,
      "tp1_size_pct":    50,
      "tp2_RR":          3.0,
      "tp2_size_pct":    50
    }
  },
  "risk_controls": {
    "risk_per_trade":          0.005,
    "max_concurrent_trades":   1,
    "max_trades_per_day":       2,
    "max_daily_drawdown_pct":   0.02,
    "max_monthly_drawdown_pct": 0.10
  }
}

11. Expectativa Estadística y Realidad del Sistema

La matemática del RR 3:1
Con RR 3:1, el sistema es rentable si el winrate supera el 25%.

Expectancy = (WR × 3R) − ((1−WR) × 1R)
E = 0  cuando  WR = 25%   →  punto de equilibrio
E > 0  cuando  WR > 25%   →  sistema rentable a largo plazo

Ejemplo con WR=40%:
  E = (0.40 × 3) − (0.60 × 1) = 1.20 − 0.60 = +0.60R por trade
  En 100 trades = +60R de beneficio neto esperado

11.1 Expectativas Realistas por Sesión
Escenario	Win Rate	Resultado mensual (20 días)
Conservador	35%	+14R aprox.
Base realista	42%	+25R aprox.
Óptimo	50%	+40R aprox.
Sin edge (aleatorio)	25%	0R (punto de equilibrio)

⚠ Aviso importante sobre expectativas
• Esta estrategia NO funciona todos los días. En días sin ORB claro o sin FVG, no hay setup.
• El winrate del 40-50% NO se garantiza: depende de condiciones de mercado y correcta ejecución.
• La estrategia requiere disciplina absoluta: seguir las reglas exactamente, sin excepciones.
• Backtesting no garantiza resultados futuros: validar siempre en cuenta demo antes de capital real.

12. Checklist de Operación Diaria

Pre-sesión (antes de las 9:25 AM NY)
•	✅ Revisar calendario de noticias: identificar eventos de alto impacto.
•	✅ Verificar spread normal del instrumento.
•	✅ Confirmar que la plataforma de ejecución y API están operativas.
•	✅ Revisar drawdown acumulado del día/mes: ¿puedo operar?

Durante la sesión (9:30–11:00 AM NY)
•	✅ 9:30–9:35: Registrar ORH y ORL. Calcular ORR. ¿Es suficiente para operar?
•	✅ 9:35+: Monitorear M1 para ruptura válida (cierre + cuerpo + volumen).
•	✅ Tras ruptura: ¿existe FVG con tamaño mínimo? Si no, descartar.
•	✅ Durante retest: ¿ha expirado el countdown? ¿Se ha invalidado el setup?
•	✅ En FVG: ¿aparece engulfing con volumen confirmado? Si sí, ejecutar.
•	✅ Ejecutada la orden: colocar SL y TP inmediatamente (OCO).

Post-trade
•	✅ Registrar resultado en audit log (outcome, pnl, slippage, notas).
•	✅ Actualizar métricas acumuladas (WR, expectancy, drawdown).
•	✅ Si 2 pérdidas consecutivas: detener operaciones del día.
•	✅ Revisar semanalmente: ¿los parámetros siguen siendo válidos?

13. Tests Unitarios Sugeridos

1.	detect_breakout(): vela cierra exactamente en ORH → válida. Cierra a 0.5 pips → inválida.
2.	compute_FVG(): serie sintética con gap conocido → FVG detectado. Sin gap → retorna None.
3.	is_engulfing(): cuerpo pequeño → False. Cuerpo igual → False. Cuerpo grande y engloba → True.
4.	calc_position_size(): account=$10k, risk=0.5%, pips=19 → resultado exacto según pip_value del instrumento.
5.	Simulación completa setup conocido: datos de una sesión histórica con ORB + FVG + Engulfing → assert entry/SL/TP dentro de 1 pip de los valores calculados manualmente.
6.	Circuit breaker: simular 2 pérdidas consecutivas → sistema detiene operaciones para el día.
7.	Expiración de setup: simular 31 velas M1 sin retest → FVG se invalida y no genera señal.

 
RESUMEN EJECUTIVO
La estrategia es rentable no por su winrate, sino por su ratio 3:1.
Con solo el 35% de operaciones ganadoras, la expectativa matemática es positiva.
La disciplina en los filtros es lo que separa un sistema con edge de uno sin él.

Stack tecnológico para implementación
Lenguaje:      Python 3.11+  (backtesting y agente)
Librerías:     pandas, numpy, vectorbt, ccxt, websockets
Datos:         OHLCV M1 + M5  |  Mínimo 3 meses históricos para backtest inicial
Broker API:    MT5 (metatrader5-python), IBKR (ib_insync), o cualquier API REST con websocket
Logging:       JSON estructurado  |  Dashboard opcional: Grafana + InfluxDB

